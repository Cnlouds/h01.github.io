---
category:	Javascript
layout:		post
title:		js加密也可以这么好玩
desc:		如何在代码中不出现[a-zA-Z]字符串？如何只使用一些特殊符号加密js代码？看看！
tags:		[javascript,jsfuck,jsplay,js加密,js另类加密]
---
偶然之间逛到一个地方，在讨论`jsfuck`，之前曾经听过但并未过多研究。今日再次无聊研究，发现还是有点好玩的！

#### 参考资料    
* [https://github.com/aemkei/jsfuck/blob/master/jsfuck.js](https://github.com/aemkei/jsfuck/blob/master/jsfuck.js)    
* [http://www.jsfuck.com/](http://www.jsfuck.com/)

#### 实现原理
从代码中可以粗略看出，比如`false`，可以使用`![]`来代替，这是因为`[]`本身为`true`，所以`![]=false`。    
同理，`false`也可以这样表示：
[code:js:edoc]
!1
!{}
!!""
...
[codend]
很简单吧？那么如何得到我们需要的字符串呢？也很简单，把一些特定的返回结果变为字符串，然后再使用数组分割即可。    
比如`false`，并非字符串，但是我们可以通过转换，生成`f`、`a`、`l`、`s`、`e`五个字符，同理，再找出其他的字符，即可组成我们需要的字符串啦～～
[code:js:edoc]
(+[![]] + "")[1] = "a";
(!1+"")[0] = "f";
(!0+"")[0] = "t";
...
[codend]

#### 如何执行
上面顶多只是说了下如何生成字符串，但是我们如何执行字符串呢？    
根据参考资料2中链接可以看到，执行字符串`eval`可通过以下代码实现：
[code:js:edoc]
[]["filter"]\["constructor"\]( CODE )()
// 例子
[]["filter"]\["constructor"\]("alert(0)")()
[codend]
但是我们的代码中是不能用比如`filter`等字符串的，那么好办，直接生成特殊符号形式，如下：
[code:js:edoc]
[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]][([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]\("alert(0);//CODE"\)()
[codend]
看上去很难理解的样子，我们拆分开来就好理解了：
[code:js:edoc]
"filter" = (![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]
"constructor" = ([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]
// 组合
[]["filter"]\["constructor"\]( CODE )()
[codend]
很容易吧！